<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Word Challenge</title>
    <style>
        :root {
            --color-primary: #ffdd00;
            --color-secondary: #1a2a6c;
            --color-accent: #b21f1f;
            --color-warm: #fdbb2d;
            --color-dark: #0a0e29;
            --color-light: #ffffff;
            --gradient-bg: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            --gradient-button: linear-gradient(to right, #3494e6, #ec6ead);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: var(--gradient-bg);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            color: var(--color-light);
        }
        
        /* Botón de menú principal */
        .home-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 12px 20px;
            background: var(--gradient-button);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }
        
        .home-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .container {
            background-color: rgba(10, 14, 41, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 600px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
        }
        
        h1 {
            color: var(--color-primary);
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .description {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .level-select {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .level-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .easy {
            background: linear-gradient(135deg, #43cea2, #185a9d);
        }
        
        .medium {
            background: var(--gradient-button);
        }
        
        .hard {
            background: linear-gradient(135deg, #ff5e62, #ff9966);
        }
        
        .level-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.3);
        }
        
        .score-display {
            font-size: 0.9rem;
            margin-top: 5px;
            font-weight: normal;
        }
        
        .game-container {
            display: none;
            margin-top: 20px;
        }
        
        .question {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--color-light);
            background-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .hint {
            margin-bottom: 20px;
            color: #ff8a8a;
            font-style: italic;
            font-weight: bold;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            display: none; /* Oculto inicialmente */
        }
        
        .attempts {
            margin-bottom: 15px;
            font-weight: bold;
            color: #ff8a8a;
        }
        
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .option {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            color: var(--color-light);
        }
        
        .option:hover {
            background-color: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
        }
        
        .selected-options {
            min-height: 80px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .selected-option {
            background-color: rgba(110, 142, 251, 0.7);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
        }
        
        .selected-option:hover {
            background-color: rgba(90, 125, 250, 0.8);
        }
        
        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .check-btn {
            background: var(--gradient-button);
        }
        
        .reset-btn {
            background: linear-gradient(135deg, #9e9e9e, #757575);
        }
        
        .reset-all-btn {
            background: linear-gradient(135deg, #607D8B, #455A64);
            margin-top: 15px;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .result {
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            min-height: 30px;
        }
        
        .correct {
            color: #8eff8a;
        }
        
        .incorrect {
            color: #ff8a8a;
        }
        
        .score {
            margin-top: 20px;
            font-size: 1.2rem;
            color: var(--color-light);
        }
        
        .progress {
            margin-top: 15px;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .back-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #607D8B, #455A64);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: linear-gradient(135deg, #546E7A, #37474F);
            transform: translateY(-2px);
        }
        
        .abc-options {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        
        .abc-option {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
            color: var(--color-light);
        }
        
        .abc-option:hover {
            background-color: rgba(255, 255, 255, 0.25);
            transform: scale(1.1);
        }
        
        .selected {
            background-color: rgba(110, 142, 251, 0.7);
            color: white;
        }
        
        .input-container {
            margin: 20px 0;
        }
        
        .word-input {
            padding: 12px 20px;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            width: 100%;
            max-width: 300px;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--color-light);
        }
        
        .word-input:focus {
            outline: none;
            border-color: #6e8efb;
            box-shadow: 0 0 10px rgba(110, 142, 251, 0.5);
        }
        
        .input-hint {
            margin-top: 10px;
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
        }
        
        .completed-message {
            margin-top: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            color: #8eff8a;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .option-text {
            margin-top: 15px;
            font-size: 1.1rem;
            color: var(--color-light);
        }
        
        .option-item {
            margin: 8px 0;
            text-align: left;
            padding: 5px 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }
        
        @media (max-width: 600px) {
            .level-select {
                flex-direction: column;
            }
            
            .options-container, .selected-options {
                flex-direction: column;
                align-items: center;
            }
            
            .option, .selected-option {
                width: 100%;
            }
            
            .word-input {
                width: 90%;
            }
            
            .level-btn {
                width: 100%;
            }
            
            .home-btn {
                top: 10px;
                left: 10px;
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .container {
                margin-top: 60px;
            }
        }
    </style>
</head>
<body>
    <!-- Botón para volver al menú principal -->
    <button class="home-btn" onclick="goToMainMenu()">🏠 Menú Principal</button>
    
    <div class="container">
        <h1>English Word Challenge</h1>
        <p class="description">Select a difficulty level and test your English knowledge.</p>
        
        <div class="level-select">
            <button class="level-btn easy" onclick="startGame('easy')">
                Easy Level
                <span id="easy-score" class="score-display">Score: 0</span>
            </button>
            <button class="level-btn medium" onclick="startGame('medium')">
                Medium Level
                <span id="medium-score" class="score-display">Score: 0</span>
            </button>
            <button class="level-btn hard" onclick="startGame('hard')">
                Hard Level
                <span id="hard-score" class="score-display">Score: 0</span>
            </button>
        </div>
        
        <button class="action-btn reset-all-btn" onclick="resetAllScores()">Reset All Scores</button>
        
        <div id="game-container" class="game-container">
            <div id="question" class="question"></div>
            <div id="hint" class="hint"></div>
            <div id="attempts" class="attempts"></div>
            <div id="progress" class="progress"></div>
            
            <div id="input-container" class="input-container">
                <input type="text" id="word-input" class="word-input" placeholder="Type the correct word">
                <p class="input-hint">Press Enter to check</p>
            </div>
            
            <div id="options-container" class="options-container"></div>
            
            <div id="selected-options" class="selected-options"></div>
            
            <div id="abc-options" class="abc-options"></div>
            
            <div id="option-texts" class="option-text"></div>
            
            <div>
                <button id="check-btn" class="action-btn check-btn" onclick="checkAnswer()">Check</button>
            </div>
            
            <div id="result" class="result"></div>
            <div id="score" class="score">Current Score: 0</div>
            
            <div id="completed-message" class="completed-message"></div>
            
            <button class="back-btn" onclick="backToMenu()">Back to Level Selection</button>
        </div>
    </div>

    <script>
        let currentLevel = null;
        let currentQuestion = null;
        let score = 0;
        let selectedOptions = [];
        let attemptsLeft = 3;
        let usedQuestions = {
            easy: [],
            medium: [],
            hard: []
        };
        
        // Puntuaciones acumulativas por nivel
        let levelScores = {
            easy: 0,
            medium: 0,
            hard: 0
        };
        
        // Base de datos de preguntas por nivel con pistas en inglés
        const questions = {
            easy: [
                { word: "house", scrambled: "osuhe", hint: "A place where people live" },
                { word: "computer", scrambled: "pumocter", hint: "Electronic machine for work and play" },
                { word: "school", scrambled: "ohclos", hint: "Place where you go to learn" },
                { word: "water", scrambled: "awter", hint: "Clear liquid essential for life" },
                { word: "book", scrambled: "kobo", hint: "You read it to gain knowledge or for entertainment" },
                { word: "apple", scrambled: "papel", hint: "Red or green fruit that grows on trees" },
                { word: "window", scrambled: "widnow", hint: "Opening in a wall to let in light and air" },
                { word: "garden", scrambled: "dragne", hint: "Outdoor area with plants and flowers" },
                { word: "friend", scrambled: "rfined", hint: "Person you like and enjoy spending time with" },
                { word: "family", scrambled: "yilmfa", hint: "Group of people related by blood" },
                { word: "tree", scrambled: "erte", hint: "Tall plant with a trunk and branches" },
                { word: "sun", scrambled: "nus", hint: "The star that provides light and heat to Earth" },
                { word: "moon", scrambled: "nomo", hint: "Natural satellite that orbits the Earth" },
                { word: "star", scrambled: "rats", hint: "A distant sun that twinkles in the night sky" },
                { word: "cloud", scrambled: "lucod", hint: "Floating mass of water vapor in the sky" },
                { word: "rain", scrambled: "nari", hint: "Falling water droplets from the sky" },
                { word: "snow", scrambled: "wnos", hint: "Frozen white flakes that fall from the sky in winter" },
                { word: "fire", scrambled: "refi", hint: "Hot, bright flames produced by burning" },
                { word: "earth", scrambled: "trahe", hint: "The planet we live on" },
                { word: "river", scrambled: "vrrie", hint: "A large natural stream of water flowing to the sea" },
                { word: "ocean", scrambled: "nocea", hint: "Vast body of salt water covering most of the Earth" },
                { word: "mountain", scrambled: "namounti", hint: "Very high and large landform" },
                { word: "forest", scrambled: "restof", hint: "Large area covered with trees" },
                { word: "flower", scrambled: "wolfre", hint: "Colorful and fragrant part of a plant" },
                { word: "animal", scrambled: "lanima", hint: "Living creature that is not a plant" },
                { word: "dog", scrambled: "god", hint: "A common pet known as man's best friend" },
                { word: "cat", scrambled: "atc", hint: "A small furry pet that meows" },
                { word: "bird", scrambled: "drib", hint: "Animal with feathers that can usually fly" },
                { word: "fish", scrambled: "shif", hint: "Animal that lives in water and has gills" },
                { word: "car", scrambled: "rac", hint: "Four-wheeled vehicle used for transportation" },
                { word: "bicycle", scrambled: "cycelib", hint: "Two-wheeled vehicle powered by pedaling" },
                { word: "train", scrambled: "nitra", hint: "Series of connected vehicles that run on rails" },
                { word: "bus", scrambled: "sub", hint: "Large vehicle that carries many passengers" },
                { word: "plane", scrambled: "nepal", hint: "Vehicle that flies in the air" },
                { word: "ship", scrambled: "hips", hint: "Large boat for traveling on water" },
                { word: "music", scrambled: "cusim", hint: "Art form of organized sound and rhythm" },
                { word: "song", scrambled: "gnos", hint: "A piece of music with vocals" },
                { word: "dance", scrambled: "ncade", hint: "Moving rhythmically to music" },
                { word: "art", scrambled: "tra", hint: "Creative expression through painting, drawing, etc." },
                { word: "color", scrambled: "orcol", hint: "Property of light seen as red, blue, green, etc." },
                { word: "time", scrambled: "mite", hint: "Measurable period in which events occur" },
                { word: "day", scrambled: "ady", hint: "Period of 24 hours" },
                { word: "night", scrambled: "thing", hint: "Dark part of the day when the sun is down" },
                { word: "week", scrambled: "ekew", hint: "Period of seven days" },
                { word: "month", scrambled: "hnmot", hint: "One of the twelve divisions of a year" },
                { word: "year", scrambled: "raey", hint: "Period of 365 or 366 days" },
                { word: "food", scrambled: "odof", hint: "What people and animals eat to live" },
                { word: "bread", scrambled: "derab", hint: "Baked food made from flour" },
                { word: "milk", scrambled: "klim", hint: "White liquid produced by mammals" },
                { word: "cheese", scrambled: "sechee", hint: "Dairy product made from milk" },
                { word: "rice", scrambled: "cier", hint: "Small grains that are a staple food in many cultures" },
                { word: "city", scrambled: "ycti", hint: "Large and important town" },
                { word: "country", scrambled: "troncuy", hint: "Nation with its own government and land" },
                { word: "world", scrambled: "dlorw", hint: "The earth and all its inhabitants" },
                { word: "people", scrambled: "peopel", hint: "Human beings in general" },
                { word: "child", scrambled: "dihcl", hint: "A young human" },
                { word: "parent", scrambled: "tnepra", hint: "A mother or father" },
                { word: "teacher", scrambled: "chetaer", hint: "Person who helps others learn" },
                { word: "doctor", scrambled: "otcord", hint: "Medical professional who treats illnesses" },
                { word: "dream", scrambled: "madre", hint: "A series of thoughts and images during sleep" }
            ],
            medium: [
                { sentence: "I like to play soccer", scrambled: "play to I soccer like", hint: "Sport with a ball and goals" },
                { sentence: "She is reading a book", scrambled: "reading a book She is", hint: "Activity of looking at and understanding written words" },
                { sentence: "We are going to the cinema", scrambled: "to going cinema the We are", hint: "Place where you watch movies on a big screen" },
                { sentence: "He doesn't eat meat", scrambled: "eat doesn't He meat", hint: "Food that comes from animals" },
                { sentence: "They have three cats", scrambled: "three have cats They", hint: "Small domesticated feline animal" },
                { sentence: "The sun is very bright today", scrambled: "bright is The today sun very", hint: "The star that gives us light and warmth" },
                { sentence: "My favorite color is blue", scrambled: "blue is favorite color My", hint: "A primary color like the sky" },
                { sentence: "I need to drink more water", scrambled: "drink more need water I to", hint: "Essential liquid for life" },
                { sentence: "She loves to listen to music", scrambled: "loves to music listen She to", hint: "Art form of organized sound" },
                { sentence: "We will travel next week", scrambled: "travel next We will week", hint: "To go on a journey" },
                { sentence: "He is cooking dinner now", scrambled: "cooking dinner He is now", hint: "Preparing food" },
                { sentence: "They are playing in the park", scrambled: "playing in park the They are", hint: "Public outdoor area for recreation" },
                { sentence: "The dog is sleeping on the bed", scrambled: "sleeping on dog bed the The is", hint: "Furniture for resting" },
                { sentence: "I have a new computer", scrambled: "a new computer I have", hint: "Electronic device for processing data" },
                { sentence: "She is wearing a red dress", scrambled: "wearing a red dress She is", hint: "Garment for women and girls" },
                { sentence: "We are learning English", scrambled: "learning English We are", hint: "A widely spoken language" },
                { sentence: "He can play the guitar", scrambled: "play the guitar He can", hint: "A musical instrument with strings" },
                { sentence: "They want to buy a house", scrambled: "to buy a house They want", hint: "A building for living in" },
                { sentence: "The baby is crying loudly", scrambled: "crying loudly baby The is", hint: "A very young child" },
                { sentence: "I lost my keys yesterday", scrambled: "lost my keys I yesterday", hint: "Used to open locks" },
                { sentence: "She works at a hospital", scrambled: "works at a hospital She", hint: "Place where sick people are treated" },
                { sentence: "We must finish our homework", scrambled: "finish our homework We must", hint: "School assignments" },
                { sentence: "He likes to watch movies", scrambled: "to watch movies He likes", hint: "Motion pictures" },
                { sentence: "They are eating ice cream", scrambled: "eating ice cream They are", hint: "Frozen sweet dessert" },
                { sentence: "The phone is ringing", scrambled: "ringing phone The is", hint: "Device for communication" },
                { sentence: "I will call you later", scrambled: "call you later I will", hint: "To telephone someone" },
                { sentence: "She has a beautiful smile", scrambled: "a beautiful smile She has", hint: "Facial expression showing happiness" },
                { sentence: "We saw a big elephant", scrambled: "a big elephant We saw", hint: "Large animal with a trunk" },
                { sentence: "He runs every morning", scrambled: "runs every morning He", hint: "Physical activity faster than walking" },
                { sentence: "They built a new school", scrambled: "built a new school They", hint: "Place for education" }
            ],
            hard: [
                {
                    text: "The ___ is a large cat species native to the Americas.",
                    correct: "jaguar",
                    options: ["jaguar", "leopard", "tiger", "panther"],
                    hint: "Spotted feline predator of the Americas"
                },
                {
                    text: "JavaScript is a programming language commonly used for ___ development.",
                    correct: "web",
                    options: ["web", "mobile", "desktop", "game"],
                    hint: "Related to internet browsers and online applications"
                },
                {
                    text: "The Great Wall of China was built to protect against ___.",
                    correct: "invaders",
                    options: ["invaders", "floods", "drought", "earthquakes"],
                    hint: "People who attack and enter a country by force"
                },
                {
                    text: "The process of photosynthesis converts sunlight into ___.",
                    correct: "energy",
                    options: ["energy", "water", "oxygen", "minerals"],
                    hint: "What machines need to operate and function"
                },
                {
                    text: "Shakespeare wrote Romeo and ___.",
                    correct: "Juliet",
                    options: ["Juliet", "Julia", "Juliana", "Julius"],
                    hint: "Female character in a famous tragic play"
                },
                {
                    text: "The capital of France is ___.",
                    correct: "Paris",
                    options: ["Paris", "London", "Berlin", "Madrid"],
                    hint: "City known as the 'City of Light'"
                },
                {
                    text: "Water boils at 100 degrees ___.",
                    correct: "Celsius",
                    options: ["Celsius", "Fahrenheit", "Kelvin", "Rankine"],
                    hint: "Temperature scale commonly used outside the USA"
                },
                {
                    text: "The largest planet in our solar system is ___.",
                    correct: "Jupiter",
                    options: ["Jupiter", "Saturn", "Neptune", "Earth"],
                    hint: "Gas giant with a famous red spot"
                },
                {
                    text: "___ is the process by which plants make their own food.",
                    correct: "Photosynthesis",
                    options: ["Photosynthesis", "Respiration", "Digestion", "Fermentation"],
                    hint: "Uses sunlight, water, and carbon dioxide"
                },
                {
                    text: "The chemical symbol for gold is ___.",
                    correct: "Au",
                    options: ["Au", "Ag", "Fe", "Go"],
                    hint: "Derived from the Latin word 'aurum'"
                },
                {
                    text: "The longest river in the world is the ___.",
                    correct: "Nile",
                    options: ["Nile", "Amazon", "Mississippi", "Yangtze"],
                    hint: "Located in Africa"
                },
                {
                    text: "A triangle with all sides equal is called ___.",
                    correct: "equilateral",
                    options: ["equilateral", "isosceles", "scalene", "right"],
                    hint: "All angles are also equal"
                },
                {
                    text: "The human body has ___ bones.",
                    correct: "206",
                    options: ["206", "200", "300", "150"],
                    hint: "Approximate number in an adult"
                },
                {
                    text: "The currency of Japan is the ___.",
                    correct: "yen",
                    options: ["yen", "yuan", "won", "ringgit"],
                    hint: "Symbol is ¥"
                },
                {
                    text: "___ is the largest ocean on Earth.",
                    correct: "Pacific",
                    options: ["Pacific", "Atlantic", "Indian", "Arctic"],
                    hint: "Covers about 30% of the Earth's surface"
                },
                {
                    text: "The famous painting 'Starry Night' was created by ___.",
                    correct: "Van Gogh",
                    options: ["Van Gogh", "Picasso", "Monet", "Da Vinci"],
                    hint: "Dutch post-impressionist painter"
                },
                {
                    text: "The speed of light is approximately ___ km/s.",
                    correct: "300,000",
                    options: ["300,000", "150,000", "450,000", "100,000"],
                    hint: "Rounded to the nearest hundred thousand"
                },
                {
                    text: "The language spoken in Brazil is ___.",
                    correct: "Portuguese",
                    options: ["Portuguese", "Spanish", "French", "Italian"],
                    hint: "Legacy of colonial history"
                },
                {
                    text: "The largest mammal in the world is the ___.",
                    correct: "blue whale",
                    options: ["blue whale", "elephant", "giraffe", "polar bear"],
                    hint: "Lives in the ocean"
                },
                {
                    text: "The first element on the periodic table is ___.",
                    correct: "Hydrogen",
                    options: ["Hydrogen", "Helium", "Oxygen", "Lithium"],
                    hint: "Lightest and most abundant element"
                },
                {
                    text: "The Great Pyramid of Giza is located in ___.",
                    correct: "Egypt",
                    options: ["Egypt", "Mexico", "Greece", "India"],
                    hint: "North African country"
                },
                {
                    text: "The hardest natural substance on Earth is ___.",
                    correct: "diamond",
                    options: ["diamond", "graphite", "tungsten", "quartz"],
                    hint: "Made of carbon"
                },
                {
                    text: "The planet known as the 'Red Planet' is ___.",
                    correct: "Mars",
                    options: ["Mars", "Venus", "Jupiter", "Mercury"],
                    hint: "Fourth planet from the Sun"
                },
                {
                    text: "The inventor of the telephone was ___.",
                    correct: "Alexander Graham Bell",
                    options: ["Alexander Graham Bell", "Thomas Edison", "Nikola Tesla", "Guglielmo Marconi"],
                    hint: "Scottish-born scientist"
                },
                {
                    text: "The smallest country in the world is ___.",
                    correct: "Vatican City",
                    options: ["Vatican City", "Monaco", "Nauru", "San Marino"],
                    hint: "Located within Rome, Italy"
                },
                {
                    text: "The process of a liquid turning into a gas is called ___.",
                    correct: "evaporation",
                    options: ["evaporation", "condensation", "sublimation", "freezing"],
                    hint: "Happens when water is heated"
                },
                {
                    text: "The author of 'Harry Potter' is ___.",
                    correct: "J.K. Rowling",
                    options: ["J.K. Rowling", "Stephen King", "George R.R. Martin", "J.R.R. Tolkien"],
                    hint: "British author"
                },
                {
                    text: "The largest desert in the world is ___.",
                    correct: "Antarctica",
                    options: ["Antarctica", "Sahara", "Gobi", "Kalahari"],
                    hint: "Cold desert at the South Pole"
                },
                {
                    text: "The number of continents on Earth is ___.",
                    correct: "7",
                    options: ["7", "5", "6", "8"],
                    hint: "Includes Africa, Asia, Europe, etc."
                },
                {
                    text: "The main gas found in Earth's atmosphere is ___.",
                    correct: "nitrogen",
                    options: ["nitrogen", "oxygen", "carbon dioxide", "argon"],
                    hint: "Makes up about 78% of the air"
                }
            ]
        };
        
        // Función para ir al menú principal
        function goToMainMenu() {
            // Guardar puntuación actual antes de salir
            if (currentLevel) {
                levelScores[currentLevel] += score;
                saveScores();
            }
            
            // Redirigir al menú principal
            window.location.href = "index.html";
        }
        
        // Cargar puntuaciones desde localStorage si existen
        function loadScores() {
            const savedScores = localStorage.getItem('levelScores');
            if (savedScores) {
                levelScores = JSON.parse(savedScores);
            }
            updateScoreDisplays();
        }
        
        // Guardar puntuaciones en localStorage
        function saveScores() {
            localStorage.setItem('levelScores', JSON.stringify(levelScores));
        }
        
        // Actualizar las visualizaciones de puntuación
        function updateScoreDisplays() {
            document.getElementById('easy-score').textContent = `Score: ${levelScores.easy}`;
            document.getElementById('medium-score').textContent = `Score: ${levelScores.medium}`;
            document.getElementById('hard-score').textContent = `Score: ${levelScores.hard}`;
        }
        
        // Reiniciar todas las puntuaciones
        function resetAllScores() {
            levelScores = {
                easy: 0,
                medium: 0,
                hard: 0
            };
            saveScores();
            updateScoreDisplays();
            
            // Mostrar mensaje de confirmación
            alert("All scores have been reset to zero!");
        }
        
        function startGame(level) {
            currentLevel = level;
            score = 0;
            attemptsLeft = 3;
            usedQuestions[level] = [];
            document.querySelector('.level-select').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            document.getElementById('score').textContent = `Current Score: ${score}`;
            document.getElementById('result').textContent = '';
            document.getElementById('completed-message').textContent = '';
            document.getElementById('progress').textContent = '';
            
            // Ocultar la pista al iniciar un nuevo juego
            document.getElementById('hint').style.display = 'none';
            
            // Configurar la interfaz según el nivel
            if (level === 'easy') {
                document.getElementById('input-container').style.display = 'block';
                document.getElementById('options-container').style.display = 'none';
                document.getElementById('selected-options').style.display = 'none';
                document.getElementById('abc-options').style.display = 'none';
                document.getElementById('option-texts').style.display = 'none';
            } else if (level === 'medium') {
                document.getElementById('input-container').style.display = 'none';
                document.getElementById('options-container').style.display = 'flex';
                document.getElementById('selected-options').style.display = 'flex';
                document.getElementById('abc-options').style.display = 'none';
                document.getElementById('option-texts').style.display = 'none';
            } else {
                document.getElementById('input-container').style.display = 'none';
                document.getElementById('options-container').style.display = 'none';
                document.getElementById('selected-options').style.display = 'none';
                document.getElementById('abc-options').style.display = 'flex';
                document.getElementById('option-texts').style.display = 'block';
            }
            
            loadQuestion();
        }
        
        function loadQuestion() {
            // Verificar si ya se completaron todas las preguntas
            if (usedQuestions[currentLevel].length >= questions[currentLevel].length) {
                document.getElementById('completed-message').textContent = 
                    `Congratulations! You completed all ${currentLevel} level questions with a score of ${score}!`;
                document.getElementById('question').textContent = '';
                document.getElementById('hint').textContent = '';
                document.getElementById('attempts').textContent = '';
                document.getElementById('input-container').style.display = 'none';
                document.getElementById('options-container').style.display = 'none';
                document.getElementById('selected-options').style.display = 'none';
                document.getElementById('abc-options').style.display = 'none';
                document.getElementById('option-texts').style.display = 'none';
                document.getElementById('check-btn').style.display = 'none';
                document.getElementById('result').textContent = '';
                
                // Sumar la puntuación actual a la acumulativa
                levelScores[currentLevel] += score;
                saveScores();
                updateScoreDisplays();
                
                return;
            }
            
            // Mostrar progreso
            document.getElementById('progress').textContent = 
                `Question ${usedQuestions[currentLevel].length + 1} of ${questions[currentLevel].length}`;
            
            // Seleccionar una pregunta que no se haya usado
            let availableQuestions = questions[currentLevel].filter((_, index) => 
                !usedQuestions[currentLevel].includes(index));
            
            if (availableQuestions.length === 0) {
                // No hay más preguntas disponibles
                document.getElementById('completed-message').textContent = 
                    `Congratulations! You completed all ${currentLevel} level questions with a score of ${score}!`;
                document.getElementById('question').textContent = '';
                document.getElementById('hint').textContent = '';
                document.getElementById('attempts').textContent = '';
                document.getElementById('input-container').style.display = 'none';
                document.getElementById('options-container').style.display = 'none';
                document.getElementById('selected-options').style.display = 'none';
                document.getElementById('abc-options').style.display = 'none';
                document.getElementById('option-texts').style.display = 'none';
                document.getElementById('check-btn').style.display = 'none';
                document.getElementById('result').textContent = '';
                
                // Sumar la puntuación actual a la acumulativa
                levelScores[currentLevel] += score;
                saveScores();
                updateScoreDisplays();
                
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            currentQuestion = availableQuestions[randomIndex];
            
            // Guardar el índice de la pregunta original
            const questionIndex = questions[currentLevel].indexOf(currentQuestion);
            usedQuestions[currentLevel].push(questionIndex);
            
            document.getElementById('result').textContent = '';
            selectedOptions = [];
            document.getElementById('selected-options').innerHTML = '';
            document.getElementById('word-input').value = '';
            attemptsLeft = 3;
            document.getElementById('attempts').textContent = `Attempts left: ${attemptsLeft}`;
            
            // Ocultar la pista al cargar una nueva pregunta
            document.getElementById('hint').style.display = 'none';
            document.getElementById('hint').textContent = `Hint: ${currentQuestion.hint}`;
            
            if (currentLevel === 'easy') {
                document.getElementById('question').textContent = `Unscramble the word: ${currentQuestion.scrambled}`;
            } else if (currentLevel === 'medium') {
                document.getElementById('question').textContent = `Unscramble the sentence: ${currentQuestion.scrambled}`;
                
                // Crear opciones para palabras o frases
                const words = currentQuestion.scrambled.split(' ');
                
                // Mezclar las palabras
                const shuffledWords = [...words].sort(() => Math.random() - 0.5);
                
                const optionsContainer = document.getElementById('options-container');
                optionsContainer.innerHTML = '';
                
                shuffledWords.forEach((word, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.textContent = word;
                    optionElement.onclick = () => selectOption(word, optionElement);
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                // Nivel difícil - opciones ABC
                document.getElementById('question').innerHTML = currentQuestion.text.replace('___', '<span style="text-decoration: underline;">___</span>');
                
                const abcOptions = document.getElementById('abc-options');
                abcOptions.innerHTML = '';
                
                // Mostrar las opciones con letras A, B, C, D
                const optionTextsElement = document.getElementById('option-texts');
                optionTextsElement.innerHTML = '';
                
                // Mezclar las opciones
                const shuffledOptions = [...currentQuestion.options].sort(() => Math.random() - 0.5);
                
                shuffledOptions.forEach((option, index) => {
                    // Crear botones A, B, C, D
                    const optionElement = document.createElement('div');
                    optionElement.className = 'abc-option';
                    optionElement.textContent = String.fromCharCode(65 + index); // A, B, C, D
                    optionElement.setAttribute('data-value', option);
                    optionElement.onclick = () => selectABCOption(option, optionElement);
                    abcOptions.appendChild(optionElement);
                    
                    // Mostrar el texto de la opción
                    const optionItem = document.createElement('div');
                    optionItem.className = 'option-item';
                    optionItem.innerHTML = `<strong>${String.fromCharCode(65 + index)}:</strong> ${option}`;
                    optionTextsElement.appendChild(optionItem);
                });
            }
        }
        
        function selectOption(word, element) {
            selectedOptions.push(word);
            element.style.display = 'none';
            
            const selectedOptionsElement = document.getElementById('selected-options');
            const selectedElement = document.createElement('div');
            selectedElement.className = 'selected-option';
            selectedElement.textContent = word;
            selectedElement.onclick = () => removeSelectedOption(word, selectedElement, element);
            selectedOptionsElement.appendChild(selectedElement);
        }
        
        function selectABCOption(option, element) {
            selectedOptions = [option];
            
            // Remover selección previa
            const abcOptions = document.getElementById('abc-options');
            const previouslySelected = abcOptions.querySelector('.selected');
            if (previouslySelected) {
                previouslySelected.classList.remove('selected');
                previouslySelected.style.backgroundColor = '';
                previouslySelected.style.color = '';
            }
            
            // Marcar como seleccionado
            element.classList.add('selected');
            element.style.backgroundColor = '';
            element.style.color = '';
        }
        
        function removeSelectedOption(word, selectedElement, originalElement) {
            const index = selectedOptions.indexOf(word);
            if (index > -1) {
                selectedOptions.splice(index, 1);
            }
            selectedElement.remove();
            originalElement.style.display = 'block';
        }
        
        function checkAnswer() {
            let isCorrect = false;
            
            if (currentLevel === 'easy') {
                const userAnswer = document.getElementById('word-input').value.trim().toLowerCase();
                isCorrect = userAnswer === currentQuestion.word.toLowerCase();
            } else if (currentLevel === 'medium') {
                const userAnswer = selectedOptions.join(' ');
                isCorrect = userAnswer === currentQuestion.sentence;
            } else {
                isCorrect = selectedOptions[0] === currentQuestion.correct;
            }
            
            const resultElement = document.getElementById('result');
            if (isCorrect) {
                resultElement.textContent = 'Correct! +10 points';
                resultElement.className = 'result correct';
                score += 10;
                document.getElementById('score').textContent = `Current Score: ${score}`;
                
                // Avanzar a la siguiente pregunta después de un breve retraso
                setTimeout(loadQuestion, 1500);
            } else {
                attemptsLeft--;
                document.getElementById('attempts').textContent = `Attempts left: ${attemptsLeft}`;
                
                // Mostrar pista después de dos intentos fallidos
                if (attemptsLeft === 1) {
                    document.getElementById('hint').style.display = 'block';
                }
                
                if (attemptsLeft <= 0) {
                    if (currentLevel === 'easy') {
                        resultElement.textContent = `No attempts left. The right answer is: ${currentQuestion.word}`;
                    } else if (currentLevel === 'medium') {
                        resultElement.textContent = `No attempts left. The right answer is: ${currentQuestion.sentence}`;
                    } else {
                        resultElement.textContent = `No attempts left. The right answer is: ${currentQuestion.correct}`;
                    }
                    resultElement.className = 'result incorrect';
                    
                    // Avanzar a la siguiente pregunta después de un breve retraso
                    setTimeout(loadQuestion, 2500);
                } else {
                    resultElement.textContent = 'Incorrect. Try again.';
                    resultElement.className = 'result incorrect';
                    
                    // Limpiar la selección para intentar de nuevo
                    setTimeout(() => {
                        resultElement.textContent = '';
                        resetSelection();
                    }, 1000);
                }
            }
        }
        
        function resetSelection() {
            if (currentLevel === 'easy') {
                document.getElementById('word-input').value = '';
            } else if (currentLevel === 'medium') {
                // Mostrar todas las opciones nuevamente
                const options = document.getElementById('options-container').querySelectorAll('.option');
                options.forEach(option => {
                    option.style.display = 'block';
                });
                
                // Limpiar selección
                selectedOptions = [];
                document.getElementById('selected-options').innerHTML = '';
            } else {
                // Para nivel difícil, quitar selección
                const selected = document.querySelector('.abc-option.selected');
                if (selected) {
                    selected.classList.remove('selected');
                    selected.style.backgroundColor = '';
                    selected.style.color = '';
                }
                selectedOptions = [];
            }
            
            document.getElementById('result').textContent = '';
        }
        
        function backToMenu() {
            // Sumar la puntuación actual a la acumulativa antes de salir
            if (currentLevel) {
                levelScores[currentLevel] += score;
                saveScores();
                updateScoreDisplays();
            }
            
            currentLevel = null;
            document.getElementById('game-container').style.display = 'none';
            document.querySelector('.level-select').style.display = 'flex';
            document.getElementById('check-btn').style.display = 'block';
        }
        
        // Permitir comprobar la respuesta con la tecla Enter en el nivel fácil
        document.getElementById('word-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && currentLevel === 'easy') {
                checkAnswer();
            }
        });
        
        // Cargar las puntuaciones al iniciar
        loadScores();
    </script>
</body>
</html>